var PHPHTMLMixedParser=Editor.Parser=(function(){var a=["<?php"];if(!(PHPParser&&CSSParser&&JSParser&&XMLParser)){throw new Error("PHP, CSS, JS, and XML parsers must be loaded for PHP+HTML mixed mode to work.");}XMLParser.configure({useHTMLKludges:true});function b(l){var e=XMLParser.make(l),g=null,d=false,h=null,f=null;var k={next:j,copy:c};function j(){var n=e.next();if(n.content=="<"){d=true;}else{if(n.style=="xml-tagname"&&d===true){d=n.content.toLowerCase();}else{if(n.style=="xml-attname"){h=n.content;}else{if(n.type=="xml-processing"){for(var m=0;m<a.length;m++){if(a[m]==n.content){k.next=i(PHPParser,"?>");break;}}}else{if(n.style=="xml-attribute"&&n.content=='"php"'&&d=="script"&&h=="language"){d="script/php";}else{if(n.content==">"){if(d=="script/php"){k.next=i(PHPParser,"<\/script>");}else{if(d=="script"){k.next=i(JSParser,"<\/script");}else{if(d=="style"){k.next=i(CSSParser,"</style");}}}h=null;d=false;}}}}}}return n;}function i(o,m){var n=e.indentation();if(o==PHPParser&&f){g=f(l);}else{g=o.make(l,n+indentUnit);}return function(){if(l.lookAhead(m,false,false,true)){if(o==PHPParser){f=g.copy();}g=null;k.next=j;return j();}var q=g.next();var p=q.value.lastIndexOf("<"),r=Math.min(q.value.length-p,m.length);if(p!=-1&&q.value.slice(p,p+r).toLowerCase()==m.slice(0,r)&&l.lookAhead(m.slice(r),false,false,true)){l.push(q.value.slice(p));q.value=q.value.slice(0,p);}if(q.indentation){var s=q.indentation;q.indentation=function(t){if(t=="</"){return n;}else{return s(t);}};}return q;};}function c(){var n=e.copy(),r=g&&g.copy(),o=k.next,p=d,q=h,m=f;return function(s){l=s;e=n(s);g=r&&r(s);f=m;k.next=o;d=p;h=q;return k;};}return k;}return{make:b,electricChars:"{}/:",configure:function(c){if(c.opening!=null){a=c.opening;}}};})();