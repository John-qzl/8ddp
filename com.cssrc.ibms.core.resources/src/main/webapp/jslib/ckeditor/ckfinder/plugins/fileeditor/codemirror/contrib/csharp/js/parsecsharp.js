var JSParser=Editor.Parser=(function(){var c={"atom":true,"number":true,"variable":true,"string":true,"regexp":true};var b=false;function d(k,g,f,j,h,i){this.indented=k;this.column=g;this.type=f;if(j!=null){this.align=j;}this.prev=h;this.info=i;}function e(f){return function(h){var j=h&&h.charAt(0),i=f.type;var g=j==i;if(i=="vardef"){return f.indented+4;}else{if(i=="form"&&j=="{"){return f.indented;}else{if(i=="stat"||i=="form"){return f.indented+indentUnit;}else{if(f.info=="switch"&&!g){return f.indented+(/^(?:case|default)\b/.test(h)?indentUnit:2*indentUnit);}else{if(f.align){return f.column-(g?1:0);}else{return f.indented+(g?0:indentUnit);}}}}}};}function a(h,G){var B=tokenizeCSharp(h);var D=[o];var w=new d((G||0)-indentUnit,0,"block",false);var L=0;var q=0;var x,m;var A={next:j,copy:P};function j(){while(D[D.length-1].lex){D.pop()();}var Q=B.next();if(Q.type=="whitespace"&&L==0){q=Q.value.length;}L+=Q.value.length;if(Q.content=="\n"){q=L=0;if(!("align" in w)){w.align=false;}Q.indentation=e(w);}if(Q.type=="whitespace"||Q.type=="comment"){return Q;}if(!("align" in w)){w.align=true;}while(true){x=m=false;D.pop()(Q.type,Q.content);if(x){if(m){Q.style=m;}return Q;}}}function P(){var R=w,S=D.concat([]),Q=B.state;return function T(U){w=R;D=S.concat([]);L=q=0;B=tokenizeCSharp(U,Q);return A;};}function N(Q){for(var R=Q.length-1;R>=0;R--){D.push(Q[R]);}}function F(){N(arguments);x=true;}function f(){N(arguments);x=false;}function r(Q){m=Q;}function p(R,S){var Q=function(){w=new d(q,L,R,null,w,S);};Q.lex=true;return Q;}function E(){w=w.prev;}E.lex=true;function g(R){return function Q(S){if(S==R){F();}else{F(arguments.callee);}};}function o(Q){return f(z,o);}function z(Q){if(Q=="var"){F(p("vardef"),I,g(";"),E);}else{if(Q=="keyword a"){F(p("form"),y,z,E);}else{if(Q=="keyword b"){F(p("form"),z,E);}else{if(Q=="{"&&b){F(p("}"),M(u,"}"),E);}else{if(Q=="{"){F(p("}"),t,E);}else{if(Q=="function"){F(n);}else{if(Q=="for"){F(p("form"),g("("),p(")"),l,g(")"),E,z,E);}else{if(Q=="variable"){F(p("stat"),C);}else{if(Q=="switch"){F(p("form"),y,p("}","switch"),g("{"),t,E,E);}else{if(Q=="case"){F(y,g(":"));}else{if(Q=="default"){F(g(":"));}else{if(Q=="catch"){F(p("form"),g("("),v,g(")"),z,E);}else{if(Q=="class"){F(s);}else{if(Q=="keyword d"){F(z);}else{f(p("stat"),y,g(";"),E);}}}}}}}}}}}}}}}function y(Q){if(c.hasOwnProperty(Q)){F(K);}else{if(Q=="function"){F(n);}else{if(Q=="keyword c"){F(y);}else{if(Q=="("){F(p(")"),y,g(")"),E,K);}else{if(Q=="operator"){F(y);}else{if(Q=="["){F(p("]"),M(y,"]"),E,K);}else{if(Q=="{"){F(p("}"),M(u,"}"),E,K);}}}}}}}}function K(Q){if(Q=="operator"){F(y);}else{if(Q=="("){F(p(")"),y,M(y,")"),E,K);}else{if(Q=="."){F(O,K);}else{if(Q=="["){F(p("]"),y,g("]"),E,K);}}}}}function C(Q){if(Q==":"){F(E,z);}else{if(Q=="("){F(M(v,")"),E,z);}else{if(Q=="{"){F(E,p("}"),t,E);}else{f(K,g(";"),E);}}}}function O(Q){if(Q=="variable"){r("csharp-property");F();}}function u(Q){if(Q=="variable"){r("csharp-property");}if(c.hasOwnProperty(Q)){F(g(":"),y);}}function M(S,Q){function R(U){if(U==","){F(S,R);}else{if(U==Q){F();}else{F(g(Q));}}}return function T(U){if(U==Q){F();}else{f(S,R);}};}function t(Q){if(Q=="}"){F();}else{f(z,t);}}function I(Q,R){if(Q=="variable"){F(H);}else{F();}}function H(Q,R){if(R=="="){F(y,H);}else{if(Q==","){F(I);}}}function l(Q){if(Q=="var"){F(I,k);}else{if(Q=="keyword d"){F(I,k);}else{if(Q==";"){f(k);}else{if(Q=="variable"){F(J);}else{f(k);}}}}}function J(Q,R){if(R=="in"){F(y);}else{F(K,k);}}function k(Q,R){if(Q==";"){F(i);}else{if(R=="in"){F(y);}else{F(y,g(";"),i);}}}function i(Q){if(Q==")"){f();}else{F(y);}}function n(Q,R){if(Q=="variable"){F(n);}else{if(Q=="("){F(M(v,")"),z);}}}function v(Q,R){if(Q=="variable"){F();}}function s(Q){if(Q=="variable"){F(s,z);}else{if(Q==":"){F(s,z);}}}return A;}return{make:a,electricChars:"{}:",configure:function(f){if(f.json!=null){b=f.json;}}};})();