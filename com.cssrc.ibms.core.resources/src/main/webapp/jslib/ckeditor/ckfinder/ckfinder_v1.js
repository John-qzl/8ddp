(function(){window.CKFinder=function(g,f,j,i){var h=this;h.BasePath=g||CKFinder.DEFAULT_BASEPATH;h.Width=f||"100%";h.Height=j||400;h.SelectFunction=i||null;h.SelectFunctionData=null;h.SelectThumbnailFunction=i||null;h.SelectThumbnailFunctionData=null;h.DisableThumbnailSelection=false;h.ClassName="CKFinderFrame";h.StartupPath=null;h.StartupFolderExpanded=false;h.RememberLastFolder=true;h.ResourceType=null;h.Id=null;h.Skin=null;h.ConnectorLanguage="php";};CKFinder.DEFAULT_BASEPATH="/ckfinder/";CKFinder.prototype={Create:function(){document.write(this.CreateHtml());},CreateHtml:function(){var f=this;var e=f.ClassName;if(e&&e.length>0){e=' class="'+e+'"';}var d=f.Id;if(d&&d.length>0){d=' id="'+d+'"';}return'<iframe src="'+f._BuildUrl()+'" width="'+f.Width+'" '+'height="'+f.Height+'"'+e+d+' frameborder="0" scrolling="no"></iframe>';},Popup:function(j,i){j=j||"80%";i=i||"70%";if(typeof j=="string"&&j.length>1&&j.substr(j.length-1,1)=="%"){j=parseInt(window.screen.width*parseInt(j,10)/100,10);}if(typeof i=="string"&&i.length>1&&i.substr(i.length-1,1)=="%"){i=parseInt(window.screen.height*parseInt(i,10)/100,10);}if(j<200){j=200;}if(i<200){i=200;}var p=parseInt((window.screen.height-i)/2,10),o=parseInt((window.screen.width-j)/2,10),n="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+j+",height="+i+",top="+p+",left="+o,m=window.open("","CKFinderPopup",n,true);if(!m){return false;}var l=this._BuildUrl().replace(/&amp;/g,"&");try{m.moveTo(o,p);m.resizeTo(j,i);m.focus();m.location.href=l;}catch(k){m=window.open(l,"CKFinderPopup",n,true);}return true;},_BuildUrl:function(f){var g=this;f=f||g.BasePath;var e="";if(!f||f.length===0){f=CKFinder.DEFAULT_BASEPATH;}if(f.substr(f.length-1,1)!="/"){f+="/";}f+="ckfinder.html";var h;if(g.SelectFunction){h=g.SelectFunction;if(typeof h=="function"){h=h.toString().match(/function ([^(]+)/)[1];}e+="?action=js&amp;func="+h;}if(g.Skin){e+=e?"&amp;":"?";e+="skin="+encodeURIComponent(g.Skin);}if(g.SelectFunctionData){e+=e?"&amp;":"?";e+="data="+encodeURIComponent(g.SelectFunctionData);}if(g.ResourceType){e+=e?"&amp;":"?";e+="type="+encodeURIComponent(g.ResourceType);}if(g.DisableThumbnailSelection){e+=e?"&amp;":"?";e+="dts=1";}else{if(g.SelectThumbnailFunction||g.SelectFunction){h=g.SelectThumbnailFunction||g.SelectFunction;if(typeof h=="function"){h=h.toString().match(/function ([^(]+)/)[1];}e+=e?"&amp;":"?";e+="thumbFunc="+h;if(g.SelectThumbnailFunctionData){e+="&amp;tdata="+encodeURIComponent(g.SelectThumbnailFunctionData);}else{if(!g.SelectThumbnailFunction&&g.SelectFunctionData){e+="&amp;tdata="+encodeURIComponent(g.SelectFunctionData);}}}}if(g.StartupPath){e+=e?"&amp;":"?";e+="start="+encodeURIComponent(g.StartupPath+(g.StartupFolderExpanded?":1":":0"));}if(!g.RememberLastFolder){e+=e?"&amp;":"?";e+="rlf=0";}if(g.Id){e+=e?"&amp;":"?";e+="id="+encodeURIComponent(g.Id);}return f+e;}};CKFinder.Create=function(h,g,l,k){var j;if(h!==null&&typeof h=="object"){j=new CKFinder();for(var i in h){j[i]=h[i];}}else{j=new CKFinder(h,g,l,k);}j.Create();};CKFinder.Popup=function(h,g,l,k){var j;if(h!==null&&typeof h=="object"){j=new CKFinder();for(var i in h){j[i]=h[i];}}else{j=new CKFinder(h,g,l,k);}j.Popup(g,l);};CKFinder.SetupFCKeditor=function(v,u,t,s){var r;if(u!==null&&typeof u=="object"){r=new CKFinder();for(var q in u){r[q]=u[q];if(q=="Width"){var p=r[q]||800;if(typeof p=="string"&&p.length>1&&p.substr(p.length-1,1)=="%"){p=parseInt(window.screen.width*parseInt(p,10)/100,10);}v.Config.LinkBrowserWindowWidth=p;v.Config.ImageBrowserWindowWidth=p;v.Config.FlashBrowserWindowWidth=p;}else{if(q=="Height"){var o=r[q]||600;if(typeof o=="string"&&o.length>1&&o.substr(o.length-1,1)=="%"){o=parseInt(window.screen.height*parseInt(o,10)/100,10);}v.Config.LinkBrowserWindowHeight=o;v.Config.ImageBrowserWindowHeight=o;v.Config.FlashBrowserWindowHeight=o;}}}}else{r=new CKFinder(u);}var n=r.BasePath;if(n.substr(0,1)!="/"&&n.indexOf("://")==-1){n=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+n;}n=r._BuildUrl(n);var m=n.indexOf("?")!==-1?"&amp;":"?";v.Config.LinkBrowserURL=n;v.Config.ImageBrowserURL=n+m+"type="+(t||"Images");v.Config.FlashBrowserURL=n+m+"type="+(s||"Flash");var l=n.substring(0,1+n.lastIndexOf("/"));v.Config.LinkUploadURL=l+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";v.Config.ImageUploadURL=l+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(t||"Images");v.Config.FlashUploadURL=l+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(s||"Flash");};CKFinder.SetupCKEditor=function(x,w,v,u){if(x===null){for(var t in CKEDITOR.instances){CKFinder.SetupCKEditor(CKEDITOR.instances[t],w,v,u);}CKEDITOR.on("instanceCreated",function(a){CKFinder.SetupCKEditor(a.editor,w,v,u);});return;}var s;if(w!==null&&typeof w=="object"){s=new CKFinder();for(var r in w){s[r]=w[r];if(r=="Width"){var q=s[r]||800;if(typeof q=="string"&&q.length>1&&q.substr(q.length-1,1)=="%"){q=parseInt(window.screen.width*parseInt(q,10)/100,10);}x.config.filebrowserWindowWidth=q;}else{if(r=="Height"){var p=s[r]||600;if(typeof p=="string"&&p.length>1&&p.substr(p.length-1,1)=="%"){p=parseInt(window.screen.height*parseInt(p,10)/100,10);}x.config.filebrowserWindowHeight=q;}}}}else{s=new CKFinder(w);}var o=s.BasePath;if(o.substr(0,1)!="/"&&o.indexOf("://")==-1){o=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+o;}o=s._BuildUrl(o);var n=o.indexOf("?")!==-1?"&amp;":"?";x.config.filebrowserBrowseUrl=o;x.config.filebrowserImageBrowseUrl=o+n+"type="+(v||"Images");x.config.filebrowserFlashBrowseUrl=o+n+"type="+(u||"Flash");var m=o.substring(0,1+o.lastIndexOf("/"));x.config.filebrowserUploadUrl=m+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";x.config.filebrowserImageUploadUrl=m+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(v||"Images");x.config.filebrowserFlashUploadUrl=m+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(u||"Flash");};})();